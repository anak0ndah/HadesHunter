<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}HadesHunter{% endblock %}</title>
    
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    
    <link href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css" rel="stylesheet">
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #6366f1;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --success-color: #22c55e;
        }
        
        body {
            background-color: #0f172a;
            min-height: 100vh;
        }
        
        .navbar {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-bottom: 1px solid #334155;
        }
        
        .navbar-brand {
            font-weight: 700;
            color: var(--primary-color) !important;
        }
        
        .card {
            background-color: #1e293b;
            border: 1px solid #334155;
            border-radius: 12px;
        }
        
        .card-header {
            background-color: #334155;
            border-bottom: 1px solid #475569;
            border-radius: 12px 12px 0 0 !important;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border: none;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        }
        
        .secret-card {
            transition: all 0.3s ease;
            border-left: 4px solid var(--danger-color);
        }
        
        .secret-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .secret-card.high-confidence {
            border-left-color: var(--danger-color);
        }
        
        .secret-card.medium-confidence {
            border-left-color: var(--warning-color);
        }
        
        .secret-card.low-confidence {
            border-left-color: var(--success-color);
        }
        
        .badge-secret-type {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        }
        
        .confidence-high { color: var(--danger-color); }
        .confidence-medium { color: var(--warning-color); }
        .confidence-low { color: var(--success-color); }
        
        .message-bubble {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 16px;
            margin-bottom: 8px;
        }
        
        .message-bubble.from-me {
            background-color: #6366f1;
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }
        
        .message-bubble.from-other {
            background-color: #334155;
            margin-right: auto;
            border-bottom-left-radius: 4px;
        }
        
        .message-bubble.target-message {
            border: 3px solid #dc3545;
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.2) 0%, rgba(220, 53, 69, 0.1) 100%);
            box-shadow: 0 0 25px rgba(220, 53, 69, 0.5);
            animation: pulse-danger 2s infinite;
        }
        
        @keyframes pulse-danger {
            0%, 100% { box-shadow: 0 0 25px rgba(220, 53, 69, 0.5); }
            50% { box-shadow: 0 0 35px rgba(220, 53, 69, 0.8); }
        }
        
        .context-highlight {
            background-color: rgba(239, 68, 68, 0.2);
            padding: 2px 4px;
            border-radius: 4px;
        }
        
        .stats-card {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
        }
        
        .stats-card .number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .stats-card .label {
            color: #94a3b8;
            font-size: 0.9rem;
        }
        
        .token-input {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.85rem;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .conversation-list {
            max-height: 500px;
            overflow-y: auto;
        }
        
        .conversation-item {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .conversation-item:hover {
            background-color: #334155 !important;
        }
        
        .conversation-item.active {
            background-color: #6366f1 !important;
        }
        
        pre code {
            font-size: 0.85rem;
        }
        
        .redacted-secret {
            font-family: 'Monaco', 'Menlo', monospace;
            background-color: #1e293b;
            padding: 4px 8px;
            border-radius: 4px;
            color: #f59e0b;
        }
    </style>
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    
    <nav class="navbar navbar-expand-lg navbar-dark mb-4">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="bi bi-shield-lock me-2"></i>HadesHunter
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/"><i class="bi bi-house me-1"></i>Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-danger fw-bold" href="/terminator"><i class="bi bi-lightning-charge-fill me-1"></i>Terminator</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/teams"><i class="bi bi-microsoft-teams me-1"></i>Teams</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/emails"><i class="bi bi-microsoft me-1"></i>Emails</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/files"><i class="bi bi-share-fill me-1"></i>Files</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/history"><i class="bi bi-clock-history me-1"></i>History</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    
    <main class="container pb-5">
        {% block content %}{% endblock %}
    </main>
    
    
    <footer class="text-center py-3 text-muted small">
        Made with ❤️ by <a href="https://www.linkedin.com/in/kondah/" target="_blank" class="text-decoration-none">Kondah Hamza</a>
    </footer>
    
    
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="text-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3 text-light" id="loadingText">Scanning conversations...</p>
        </div>
    </div>
    
    
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="toastNotification" class="toast" role="alert">
            <div class="toast-header">
                <i class="bi bi-info-circle me-2" id="toastIcon"></i>
                <strong class="me-auto" id="toastTitle">Notification</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toastBody"></div>
        </div>
    </div>
    
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>
    
    <script>
        function showLoading(text = "Loading...") {
            document.getElementById("loadingText").textContent = text;
            document.getElementById("loadingOverlay").style.display = "flex";
        }
        
        function hideLoading() {
            document.getElementById("loadingOverlay").style.display = "none";
        }
        
        function showToast(title, message, type = "info") {
            const toast = document.getElementById("toastNotification");
            const toastTitle = document.getElementById("toastTitle");
            const toastBody = document.getElementById("toastBody");
            const toastIcon = document.getElementById("toastIcon");
            
            toastTitle.textContent = title;
            toastBody.textContent = message;
            
            const iconClasses = {
                "success": "bi-check-circle text-success",
                "error": "bi-x-circle text-danger",
                "warning": "bi-exclamation-triangle text-warning",
                "info": "bi-info-circle text-info"
            };
            
            toastIcon.className = "bi me-2 " + (iconClasses[type] || iconClasses.info);
            
            const bsToast = new bootstrap.Toast(toast);
            bsToast.show();
        }
        
        function getConfidenceClass(confidence) {
            if (confidence >= 0.8) return "high";
            if (confidence >= 0.6) return "medium";
            return "low";
        }
        
        function formatTimestamp(timestamp) {
            if (!timestamp) return "Unknown";
            const date = new Date(timestamp);
            return date.toLocaleString();
        }
        
        function escapeHtml(text) {
            const div = document.createElement("div");
            div.textContent = text;
            return div.innerHTML;
        }
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
